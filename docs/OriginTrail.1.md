# [OriginTrail-White-Paper](https://origintrail.io/storage/documents/OriginTrail-White-Paper.pdf)


## Abstract
區塊鍊技術具有極大的淺力應用在供應鏈。帶來諸多好處不管公私部門。
為了解放區塊鍊在供應鏈的淺力，OriginTrail protocol提出了解決方案，來解決現在面臨的主要問題。包含流暢地交換，與數據的完整性。
隨著供應鏈資料越來越分散，去中心化可擴展且考量成本的解法變得越來越明顯。
OriginTrail 的解法允許IT供應商設置區塊鍊支持多組織環境下的數據共享。它有助於建立透明度。並且，改善了產品數據的完整性並提高效率。
第一版OriginTrail解決方案經過驗證，目前已在食品行業中使用。 即將到來的開源版本適用於任何產品供應鏈，如汽車，消費品，製藥等。

## 1. Document purpose
OriginTrail protocol的開發是基於五年多解決供應鏈信息透明度的經驗。這包含了過去豐富的區塊鍊科技實際經驗。
儘管區塊鍊發展快速，但我們看到供應鏈實際應用與區塊鍊之間的差距。
區塊鍊應用將挑戰全球經濟中重要的不透明，低效且不受信任的供應鏈。
OriginTrail開源技術將為供應鏈帶來分散化，互操作性，數據和信息完整性和信任。

## 2. Vision
環顧周圍所有物品皆來自全球供應鏈，但你卻對他一無所知。其主因就是供應鏈中因有限的資料分享所造成的不透明問題。
OriginTrail為供應鏈提出去中性化的協議來來改善面臨到的問題。
OriginTrail使用區塊鏈並建立在行業中的GS1標準之上，為建立新價值提供了必要的基礎 - 增加了信任，優化供應鏈效率，自動合規並實施質量保證流程。
使用OriginTrail，所有利益相關者都可以安全地共享數據並完全保留敏感數據。
通過支持全球數據交換標準，OriginTrail確保與現有ERP系統的兼容性，讓實施過程快且有效率。 
OriginTrail不是一家公司，它是一個基於token經濟上的生態系統。

## 3. Supply chain challenges
隨著貿易全球化，供應鏈越來越複雜。其中便增加了信息不對稱的問題。當參與者在不同公司，沒有任何激勵機制來促使資訊的完整性，
因此最終的產品購買者沒有任何方法來驗證他們所購買的東西。造成了假冒商品氾濫，安全問題，違反勞工標準。
造成此問題的兩個關鍵問題是資料碎片化，以及沒有合適的去中心化解決方法。

### 3.1  Fragmentation of data in siloes and opacity of supply chains
現今資訊管理解決方案與本地化的資訊系統，ERP系統以及客製化解決方案有關。為使其三者互相溝通，必須實踐客製化的整合。
易造成資料孤島，此集中式的環境缺乏通用技術環境，安全性與交換協議來促進資訊共享。
由於此低互動性，造成相關利益者無法即時的獲得有用的資訊。由於資訊於利益者間前後共享與傳遞，容易造成信任被打破。
因此許多組織目標要解決此問題，帶來更多的秩序與信任。然而這些組織都無法確保整個鏈的完整性，只有部分供應鏈得到審核，最終沒能解決。

### 3.2 Shortcomings of current decentralised solutions
基於區塊鍊的開放與去中心化與兼容，適合克服以上挑戰。
然而目前的解決方案在儲存處理和交互上都效率不彰。
IIPFS,Storj 皆為好的去中心化儲存方案，但缺乏搜尋，累積分析，靈活處理互動資訊的能力。
Ethereum, IOTA, Hyperledger Fabric以及其他相似的解決方案並非為了數據儲存而設計，並且相較傳統數據庫昂貴。
bigchainDB雖提供合適的資料庫功能，但不適合供應鏈上不同的模型。

## 4. OriginTrail - First purpose built protocol for
supply chains based on blockchain
OriginTrail 協議讓IT供應商輕鬆設置區塊鍊來支持織料的共享，透明，與可追蹤。保護品牌免於詐欺，並提高效率。
OriginTrail 透過共識機制，促進在不同組織間IT系統內的無縫，與自動數據連接，來保證資料的完整性。
OriginTrail 訂製的供應鏈分散系統，提供一個高效的公共去中心化解決方案。
用戶可透過OriginTrail開發出多樣的供應鏈應用，包含供應鏈軟件公司，ERP提供商，物聯網提供商，軟件開發
公司。
OriginTrail 提供的價值包含
* product authentication,						產品認證
* product journey visibility,					產品旅程可見性
* product recall efficiency,					產品招回效率
* product freshness for perishables,			易腐食品的產品新鮮度
* chain of custody with accountability,			有責任的監管鏈
* CSR activities support,						CSR活動支援
* supply chain mapping and optimisation, 		供應鏈對應與最佳化
* inventory management,							庫存管理
* alert systems (exception management),			警報系統(異常管理)
* supply chain compliance assurance,			供應鏈合規保證
* customs, audit and regulations process optimisation,		海關，審計和法規流程優化	
* and any other supply chain application that requires transparent supply chain
as a starting point,			以及其他需要透明度的供應鏈應用

### 4.1 Automatic data connection and interoperability beyond the
"one step back, one step forward" principle
OriginTrail 協議允許在供應鏈上多組織之間的數據交換，同時確保數據品質與完整。克服以往資訊被侷限在前後的限制。
供應鏈可以遍布全球，每個成員都有自己的本地標準。

#### 4.1.1. Data interoperability format
為了提供統一的資料流，所有資訊訊在整個生態圈內必定要標準化。使用被廣泛採用於數據交換的XML文件格式，供應鏈遍布全球，每個成員都有自己的本地標準，例如時間，因此傳送至OriginTrail 勢必要標準化。
OriginTrail採用廣泛使用的GS1標準。GS1標準支援終端使用者在供應鏈上所需要的訊息。特別是供應鏈參與者間商業流程訊息。
OriginTrail支援以下但不限於。
Master Data 主要資料
	由一個交易夥伴分享至其他多方夥伴的數據，由GS1來描述特徵，包括交易項目，參與方，與實際位置。
Transaction Data 傳輸資料
	交易的資料傳輸觸發明確的商業協議所定義的商業流程執行
Visibility Data​: 可視資料
	跨組織之間的資料可視性，透過key來識別供應鏈上的實體即數位資訊

OriginTrail 專注於EPCIS框架，包含資料的分層化，擴充性與模組化。
其他如物聯網與合規數據，OriginTrail提供資料交換以及防串改能力，這將使得整個供應鏈更加完整。

#### 4.1.2. Data consensus check as a tool for trustworthiness
當收到一份資料時，OriginTrail協議執行共識檢查，驗證不同的數據在不同的參與方之間沒有差異。參考如下步驟

* step 1: 每個利益相關者必須得到前一個和後一個供應鏈的批准，建立責任鏈。
* step 2: 驗證動態批次信息的，包括批處理標識符的關鍵資訊，適當的時間戳和交易資訊。 由於此步驟涉及公司隱私數據，例如銷售數量。因此採用零知識證明機制來驗證這些隱私數據。
* step 3: 作為額外的可信度，審計和合規組織可以透過驗證數據來提供確認。這確保整個供應鏈符合該批產品的要求。如果沒有達成共識，可以快速報告，調查和協調差異。差異的調節也將記錄在OriginTrail上，附加信息作為特殊的和解訊息上傳，資料再次受到相同的共識機制的約束。

### 4.2 OriginTrail Decentralized Network
為了提供最佳的解決方案，在非鏈上實行點對點的OriginTrail協議，稱為OriginTrail Decentralised Network(ODN)。
它使網絡上的節點能夠協商服務，傳輸，處理和檢索數據，驗證數據的完整性和可用性，並償還提供者節點。
此解決方案最大限度地減少了區塊鏈上存儲的數據量，從而降低了成本低效率。
OriginTrail將區塊鏈作為平台，以確保數據的完整性。所有資料在區塊鍊上都有個防篡改的指紋(加密哈希)。確保資料完整性。
如果需要檢查資料是否被篡改，只需檢查收到的資訊與區塊鍊上資料是否相符。
OriginTrail目前在以太坊區塊鏈上實行來驗證概念，其整個實行方案可套用在其他區塊鍊網路上。
採用此方法有以下幾點原因
1. 競爭區塊鏈難以預期，這將是影響區塊鏈使用的定價
2. 未來可能發展出更有競爭力的區塊鍊平台
3. 相關者已經將區塊鏈解決方案用於各種目的，OriginTrail能使用相同的區塊鏈。
在區塊鍊平台之上將有兩層，ODN資料層與ODN網路層。

#### 4.2.1 The ODN Data layer
ODN的數據層負責所有必要的數據管理和連接功能。由於需要在供應鏈中連接許多不同的數據集，同時提供支持許多不同連接選項的靈活性。數據的關聯性是ODN資料層的關鍵因素。
為了以最有效的方式利用數據關係，系統需要一個數據庫儲存關聯式資料。
圖形資料庫滿足此技術要求。圖形資料庫具有高效能，高靈活度等特性，廣泛應用在許多大型企業與線上零售上。
* interoperability,	互操作性。因為圖形可以在低操作成本的情況下輕鬆擴展和修改
* high performance, 高性能。圖形資料庫非常適合快速遍歷和連接
* high availability, 高可用性

每個特定的產品供應鏈都有自己的圖表。插入數據後，就無法再修改，只能將其他信息再添加到圖表中。
每加入新的資訊進入圖表，會改變原來的hash，並將其儲存在區塊鍊上，這允許了版版化的圖形資料，方便之後做驗證。
這是重要的圖形資料庫優勢

#### 4.2.2 ODN Network layer
ODN網絡層負責底層數據層的可訪問性和數據治理。由網絡節點組成，所有網絡節點都包含部分分散數據庫並儲存數據圖資料。可透過API訪問。
點對點的網路是建構於Kademlia上的哈希表，負責網路路由。Kademlia 節點ID代表一組有效的以太位址，訊息在彼此節點中被簽名。
這強制長效期的身份幫助Kademlia路由和Eclipse攻擊。
節點根據與供應鏈的互動可分為兩種，資料創造者(DC)與資料持有者(DH。DC和DH節點在其係統能力方面是相同的，但是在它們在供應鏈系統中關於特定的數據上下文中被視為不同。
DC節點負責輸入數據到供應鏈網絡上，並在特定數量的DH節點上複製它。
針對這種區別，每n個DC節點加入供應鏈網路，一定數量的DH節點將保留特定資料副本，其數量至少為n+1。所有節點皆保留圖形資料在本地資料庫。在這種方式下，確保DH節點比DC節點多，最大限度地減少供應鏈參與者之間相互勾結的可能性。


### 4.3 Data input
要將數據集引入OriginTrail，可以使用標準化的接口格式，通過Web服務或通過OriginTrail提供的導入器，導入XML文件。兩種機制已在2014年建立的OrininTrail初版建立。
當新數據集引入DC節點後，它將執行：
	1. 針對語意錯誤，數據標準，進行初始資料檢查。如發生則透過web服務報告
	2. 檢查後，資料在數據庫中轉換為圖形形式，稱為Proto圖形，由產品和批次識別符所產生的唯一標識。
	3. 節點夠過資料分佈協議，將資新圖形料導入網路中
	4. 一旦成功，資料將會結合在供應鏈主圖形上，並由區塊鍊層來進行驗證


### 4.4 Data distribution protocol
資料由DC節點上傳到網路並廣播，其內容包含產品P的資訊。DC節點通知每個收到服務提案的DH節點，提案接受並編碼。
DC節點送出編碼後的圖形資料，根據接受提案，進行初始儲存驗證。每個DH節點哈希收到的加密資料並上傳至區塊鍊。
如果區塊鍊上已有該加密資料，則進行資料驗證，驗證成功後，此次資料即存在產品的圖形資料內，並廣播至全網。
從OriginTrail讀取數取決於產品標示符，涉及具有一組特定輸入信息的節點請求資訊。
當一個節點收到針對特定資料集的請求時，先檢查持有數據DH的位置。如果該節點即馬上回傳，如果不是則轉送至最近的節點尋找資訊。


### 4.5 Possible system attacks

* Sybil & Outsourcing Attacks
	理論上，創建多個身份將允許惡意節點假裝存儲相同副本數據，但實際上只存在一次，並在需要證明時快速擷取。
	此問題已在IPFS Proof-of-Replication 被解決。有了這些先決條件，加密就被用來證明復製而不是用來模糊數據。
	在將數據輸入系統之前，由DC節點加密需要隱藏的輸入信息。
	因此OriginTrail需要定期要求節點，證明它們是存儲特定的編碼的圖形資料，其中每個編碼是可區分和不可壓縮的。

	* 透過響應時間，以區分誠實和惡意節點，因為攻擊者需要首先加密然後通過網絡傳輸圖形資料。
	* 任意調整的運行時間。其中時間在處理下個資料前，為每個圖形資料加密所需之時間
	* 可公開驗證的，這是通過使用節點唯一公鑰的來實現
	* 具有快速反向解碼功能，因此可以快速完成解碼


* The 51% Attack
	51％攻擊只在分散式網路中，其掌控超過51%運算能力即同時擁有操縱數據的能力。
	在OriginTrail中，藉由從DH節點中取出的加密指紋來驗證每個圖形資料尚未被修改，來防止這樣的攻擊。
	此外DH節點被激勵儲存資料已做驗證與補償，如果節點未能提供檢索與複製的證據，則DC可以用系統中的另一個節點替換它。


* Byzantine faults
	拜占庭故障由節點故障所引起，透過傳遞不可用或是錯誤的圖形資料所導致。在OriginTrail中，不正確的資料無法通過驗證。
	由於資料自理的共識，複製多份圖形資料在多個節點上。拜占庭故障隨著參與的節點數多而減少。
* Eclipse attacks
	透過孤立某些節點，使其只連結到惡意節點稱為Eclipse攻擊。此問題可通過在Kademlia中使用公鑰哈希作為節點ID來解決。
	為了遮蔽網絡上的節點，攻擊者必須生成密鑰對，這些密鑰對在Kademlia中將自己定位在距離目標節點較近的位置，在新節加入時，持續維持這樣的位置關係。隨著越來越多的節點加入，問題變得更複雜。

* Hostage data attacks
	惡意節點可能拒絕提供某些圖表資料，以勒索數據所有者以獲取token。 通過在多個節點上複製圖數資料來降低這種可能性

### 4.6 Trace token economic
OriginTrail生態系統通過代幣化的數據交換和供應鏈處理功能來實現。整個系統網路由運行OriginTrail程式的端點所組成。他們的供應滿足了供應鏈上生產者與消費者的需求。
Trace token屬於生產者與消費者間的賠償金，由節點所持有，目標促進整體點對點網路的功能健全，維護和運行網路上的資源，包含時間，電力，計算能力，儲存空間與通信頻寬。
因此依據OriginTrail節點獎勵可分為兩種，資料處理與儲存。
資料處理包含共識檢查，資料完整性與複本檢查。資料儲存包含管理以及傳輸。
基於協議，節點運行寫入與儲存操作將收到token作為補償。值得注意的是，OriginTrail使用區塊鏈作為底層，它提供了一個獨立的系統，因此根據所選擇的底層區塊鏈，會增加了一些OriginTrail功能的額外成本。例如運行在以太坊上會消耗gas。
讀取操作也可使用token作為補償。滿足特定條件可以免費操作。例如從以太坊讀取資訊，或是自己即為包含必要資料的OriginTrail節點。
token獎勵由提供服務的提供方與消費方決定。資料創造者不需要支付任何費用，另一方面，節點將收到消費方收到費用。
Trace token 屬於ERC20 token




